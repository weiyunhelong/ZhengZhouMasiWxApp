<!--pages/kecheng/detail.wxml-->
<!--顶部的状态栏-->
<view style="background: #000;width: 100vw;height:calc({{navigationBarHeight}}px + 10rpx);"></view>
<view class="pagetitlev" style="top:calc({{navigationBarHeight}}px + 10rpx);">
  <view class="backiconv" bindtap="goBackOpt">
    <image src="/resources/comman/backiconw.png" class="backicon"></image>
  </view>
  <view class="pagetitle"></view>
</view>

<!--视频部分-->
<video class="videoobj" object-fit="fill" controls="{{true}}" autoplay="{{false}}" initial-time="0:00" 
 src="{{dataobj.Video}}" poster="{{dataobj.Video}}?x-oss-process=video/snapshot,t_7000,f_jpg,w_750,h_422,m_fast" bindtimeupdate="ViewVideoOpt"></video>

<!--视频信息-->
<view class="videoinfov">
  <view class="videoname">{{dataobj.Title}}</view>
  <view class="infov">
    <view class="origin">来源：{{dataobj.UserName}}</view>
    <view class="numtxt">{{dataobj.PlayNum}}次播放</view>
  </view>
</view>
<view class="kongv"></view>

<!--分类部分-->
<view class="tabv">
  <view class="tabitem" bindtap="tapTab" data-tab="1">
    <view class="{{chktab==1?'tabtxth':'tabtxt'}}">视频介绍</view>
    <view class="tabline" wx:if="{{chktab==1}}"></view>
  </view>
  <view class="tabkong"></view>
  <view class="tabitem" bindtap="tapTab" data-tab="2">
    <view class="{{chktab==2?'tabtxth':'tabtxt'}}">学习交流（{{dataobj.CommentNum}}）</view>
    <view class="tabline" wx:if="{{chktab==2}}"></view>
  </view>
</view>

<scroll-view scroll-y="true" class="objinfov" style="height: calc(100vh - 720rpx);">

  <!--视频介绍部分-->
  <block wx:if="{{chktab==1}}">
    <!--内容简介-->
    <view class="contentv">
      <h5parser html="{{dataobj.Introduce}}" />
    </view>
    <view class="optbtmvv"></view>
    <view class="optbtmv">
      <button open-type="share" class="optitem">
        <image src="/resources/icon/share.png" class="optitemshareicon"></image>
        <view class="optitemtxt">转发</view>
      </button>
      <view class="optitem">
        <image src="/resources/icon/xiaoxi.png" class="optitemxiaoxiicon"></image>
        <view class="optitemtxt">消息</view>
      </view>
      <view class="optitem" bindtap="CollectOpt">
        <image src="{{dataobj.IsCollect?'/resources/icon/collecth.png':'/resources/icon/collect.png'}}" class="optitemshareicon"></image>
        <view class="{{dataobj.IsCollect?'optitemtxth':'optitemtxt'}}">{{dataobj.CollectionNum}}</view>
      </view>
      <view class="optitem" bindtap="ZanOpt">
        <image src="{{dataobj.IsLike?'/resources/icon/zanh.png':'/resources/icon/zan.png'}}" class="optitemshareicon"></image>
        <view class="{{dataobj.IsLike?'optitemtxth':'optitemtxt'}}">{{dataobj.LikesNum}}</view>
      </view>
    </view>
  </block>

  <!--学习交流部分-->
  <block wx:if="{{chktab==2}}">
    <view style="width: 100%;height: 30rpx;"></view>
   
    <!--评论部分-->
    <block wx:for="{{dataobj.CommentList}}" wx:key="item" wx:for-index="x">
      <view class="commentv">
        <view class="commentuv">
          <view class="commentul">
            <image class="commentutx" mode="aspectFill" src="{{item.Avatar}}"></image>
            <view style="width: 400rpx;">
              <view class="commentunamev">
                <view class="commentuname">{{item.NickName}}</view>
                <view class="commentuowner" wx:if="{{item.IsAuthor}}">作者</view>
              </view>
              <view class="commentudate">{{item.CreateTime}}</view>
            </view>
          </view>
          <view class="commentur" bindtap="ZanCommentOpt" data-index="{{x}}" data-status="{{item.IsLike}}" data-id="{{item.CommentId}}">
            <image src="{{item.IsLike?'/resources/icon/zanh.png':'/resources/icon/zan.png'}}" class="commentuzanicon"></image>
            <view class="{{item.IsLike?'commentuzannumr':'commentuzannum'}}">赞{{LikesNum}}</view>
            <view class="commentuhuifu">回复{{item.ReplyNum}}</view>
          </view>
        </view>
        <view class="commentdesc" bindtap="tapFeedback" data-id="{{item.CommentId}}" data-name="{{item.NickName}}">{{item.Contents}}</view>

        <block wx:if="{{item.ReplyCommentList.length>0}}">
          <view class="commentreplayv">
            <block wx:for="{{item.ReplyCommentList}}" wx:key="ritem" wx:for-item="ritem" wx:for-index="rx">
              <view class="commentreplayc" wx:if="{{item.IsOpen?rx<item.ReplyCommentList.length:rx<3}}" bindtap="tapFeedback" data-id="{{ritem.ReplyId}}" data-name="{{ritem.ReplyUser}}">
                <text class="commentreplayer">{{ritem.ReplyUser}}</text>
                <text class="commentreplayor" wx:if="{{ritem.IsAuthor}}">作者</text>
                <text class="commentreplaytip">回复</text>
                <text class="commentreplayer">{{ritem.CommentUser}}</text>
                <text class=" commentreplaytxt">:{{ritem.Contents}}</text>
              </view>
            </block>
            <view class="commentreplayc" wx:if="{{item.ReplyCommentList.length>3&&!item.IsOpen}}" catchtap="ShowMoreComment" data-index="{{x}}">
              <text class="commentreplayer">共{{item.ReplyCommentList.length}}条回复></text>
            </view>
          </view>
        </block>
      </view>
    </block>
    <nodatacom wx:if="{{dataobj.CommentList.length==0}}" />

    <!--底部按钮部分-->
    <view class="btmvv"></view>
    <view class="btmv">
      <view class="textv">
        <input class="commenttxt" placeholder-class="commenttip" placeholder="{{placeholdertxt}}" type="text" value="{{comment}}" bindinput="getComment" />
      </view>
      <view class="sendbtn" bindtap="sendMsgOpt">
        <image src="/resources/comman/send.png" class="sendicon"></image>
      </view>
    </view>

  </block>

</scroll-view>

<!--loadding 加载-->
<loadding showloadingMask="{{showloadingMask}}"/>